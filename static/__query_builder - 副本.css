<!DOCTYPE html>

<html dir="ltr" mozdisallowselectionprint moznomarginboxes>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="google" content="notranslate">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>PDF.js viewer</title>


    <link rel="stylesheet" href="viewer.css">
    <link rel="stylesheet" href="index_viewer.css">


    <!-- This snippet is used in production (included from viewer.html) -->
    <link rel="resource" type="application/l10n" href="locale/locale.properties">
    <script src="build/jquery-3.3.1.min.js"></script>
    <script>
    

    (function($){
      $.event.special.destroyed = {
        remove: function(o) {
          if (o.handler) {
            o.handler()
          }
        }
      }
    })(jQuery)
    </script>
    <script src="sentiment.js"></script>
    <script src="compromise.min.js"></script>
    <script src="javascript-lemmatizer/bower_components/underscore/underscore.js"></script>
    <script src="javascript-lemmatizer/js/lemmatizer.js"></script>
    <script src="bundle_stopword.js"></script>
    <script src="build/pdf.js"></script>
    <!-- <script src="customized_var.js"></script> -->
    <script src="idx_utils.js"></script>
    <script>
    var afterUrl =  window.location.search.substring(1);
    // console.log('window.location.search',window.location.search)
    // console.log('afterUrl',afterUrl)
    var json_data = afterUrl.replace(/%22/g,'"')
    json_data = json_data.replace(/%20/g,' ')
    console.log('json_data',json_data)
    var options = JSON.parse(json_data)
    console.log('options',options)

    var DEFAULT_URL = options['pdf_url']
    var custom_kw_textarea = options['custom_kw_textarea']
    var custom_kw_url = options['custom_kw_url']
    var kw_pair_cluster_wise = options['kw_pair_cluster_wise']
    var no_summary = options['no_summary']
    var include_non_dense_kw = options['include_non_dense_kw']
    var multiple_sort_round = options['multiple_sort_round']
    var kw_once = options['kw_once']
    var every_kw_cluster = options['every_kw_cluster']
    var positive_as_kw = options['positive_as_kw']
    var negative_as_kw = options['negative_as_kw']
    var verb_as_kw = options['verb_as_kw']
    var outline_only = options['outline_only']
    var n_gram_min = options['n_gram_min']
    var n_gram_max = options['n_gram_max']
    var reoccur_cutoff = options['reoccur_cutoff']
    var max_n_of_n_gram_displayed = options['max_n_of_n_gram_displayed']
    var kw_num_cutoff_ratio = options['kw_num_cutoff_ratio']
    var use_kw_num_cutoff_ratio = options['use_kw_num_cutoff_ratio']
    var kw_num_cutoff_value = options['kw_num_cutoff_value']
    var use_kw_num_cutoff_value = options['use_kw_num_cutoff_value'] 
    var join_strbuf_by_space = options['join_strbuf_by_space']
    var max_display_unit_draw_num = options['max_display_unit_draw_num']
    var max_display_unit_display_num = options['max_display_unit_display_num']
    var customized_min_dense_discard_cutoff = options['customized_min_dense_discard_cutoff']
    var customized_min_dense_show_cutoff = options['customized_min_dense_show_cutoff']
    var use_div_draw_by_click = options['use_div_draw_by_click']
    var only_require_unit_total_hits_above_calculated_min_dense_cutoff = options['only_require_unit_total_hits_above_calculated_min_dense_cutoff']
    var filter_terms_with_min_dense_hit_cutoff = options['filter_terms_with_min_dense_hit_cutoff']
    var use_kw = options['use_kw']
    var use_kw_pair = options['use_kw_pair'] 
    var use_n_gram = options['use_n_gram']
    var hide_super_and_equal = options['hide_super_and_equal']
    var hide_almost_supered = options['hide_almost_supered']
    var show_overlap_info = options['show_overlap_info']
    var one_sent_per_page_for_non_dense_sent = options['one_sent_per_page_for_non_dense_sent']    
    var polyline_only = options['polyline_only']

    var   DF   =   options['DF']
    var NG_L   = options['NG_L']
    var NG_S   = options['NG_S']
    var NG_G   = options['NG_G']
    var BC_L   = options['BC_L']
    var BC_S   = options['BC_S']
    var BC_G   = options['BC_G']
    var   DF_r =   options['DF_r']
    var NG_L_r = options['NG_L_r']
    var NG_S_r = options['NG_S_r']
    var NG_G_r = options['NG_G_r']
    var BC_L_r = options['BC_L_r']
    var BC_S_r = options['BC_S_r']
    var BC_G_r = options['BC_G_r']
    var use_set_interval = options['use_set_interval']
    var pdf_file_name = decodeURI(options['pdf_file_name'])
    var start_sent_idx = options['start_sent_idx']
    var end_sent_idx = options['end_sent_idx']
    // var textarea_div_parent
    // $(()=>{
    //   textarea_div_parent = $('div#textarea_div_parent')
    //   textarea_div_parent.detach()
    // })
    

    var start_ = new Date();

    //var str = "js实现用{two}自符串替换占位符{two} {three}  {one} ".format({one: "I",two: "LOVE",three: "YOU"});
    //var str2 = "js实现用{1}自符串替换占位符{1} {2}  {0} ".format("I","LOVE","YOU");
    String.prototype.format = function() {
     if(arguments.length == 0) return this;
     var param = arguments[0];
     var s = this;
     if(typeof(param) == 'object') {
      for(var key in param)
       s = s.replace(new RegExp("\\{" + key + "\\}", "g"), param[key]);
      return s;
     } else {
      for(var i = 0; i < arguments.length; i++)
       s = s.replace(new RegExp("\\{" + i + "\\}", "g"), arguments[i]);
      return s;
     }
    }
    </script>
    <!-- <script src="default_url.js"></script> -->
    <script src="get_flat_outline.js"></script>
    <script src="sbd_browser.js"></script>
    <script src="tfidf.js"></script>
    <script src="draw_utils.js"></script>
    <script src="draw_zoom.js"></script>
    <script src="func.js"></script>
    <script src="sorter.js"></script>
    <script src="svg.js"></script>
    <script src="idx_var.js"></script>
    <script src="idx_func.js"></script>
    <script src="idx_df.js"></script>
    <script src="text_extraction.js"></script>
    <script src="idx_key_bnd.js"></script>
    <script src="viewer.js"></script>
    <!-- <script src="idx_append.js"></script> -->

  </head>

  <body tabindex="1" class="loadingInProgress">

    <div id='textarea_div_parent' class=hidden>

      <div id='para_div' >

        <label for="max_display_unit_draw_num" ><input id="max_display_unit_draw_num" type="text" >v1</label><!-- max_display_unit_draw_num -->
        <label for="max_display_unit_display_num" ><input id="max_display_unit_display_num" type="text" >v2</label><!-- max_display_unit_display_num -->
        <!-- <label for="customized_min_dense_discard_cutoff" ><input id="customized_min_dense_discard_cutoff" type="text" >v3</label> --><!-- customized_min_dense_discard_cutoff -->
        <!-- <label for="customized_min_dense_show_cutoff" ><input id="customized_min_dense_show_cutoff" type="text" >v4</label> --><!-- customized_min_dense_show_cutoff -->

        <label>--------------------------------</label>

        <label for="draw_polyline" ><input id="draw_polyline" type="checkbox" checked='checked'>draw_polyline</label>
        <label for="polyline_from_summary" ><input id="polyline_from_summary" type="checkbox" checked='checked'>polyline_from_summary</label>
        <label for="c3" ><input id="c3" type="checkbox" checked='checked'>c3</label>

        <label>--------------------------------</label>

      </div>    

      <div id='textarea_div'>

        <textarea id='textarea'> </textarea>
        <button id='textarea_submit_button'> Submit </button>

      </div>  

    </div>

    
  </body>
</html>

