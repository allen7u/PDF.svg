1
00:00:00,350 --> 00:00:13,980
so let's get started well it's really a

2
00:00:10,469 --> 00:00:15,839
lot of people in here so thanks for

3
00:00:13,980 --> 00:00:18,570
coming all and thanks for having me and

4
00:00:15,839 --> 00:00:22,710
today I want to present to your PDF

5
00:00:18,570 --> 00:00:25,640
chairs and one of you or let's see how

6
00:00:22,710 --> 00:00:28,380
many of you heard of protech already

7
00:00:25,640 --> 00:00:31,260
okay not that much so it's gonna be more

8
00:00:28,380 --> 00:00:33,059
to introduce that's cool so here's what

9
00:00:31,260 --> 00:00:36,570
I want to do a little bit of overview

10
00:00:33,059 --> 00:00:38,760
and I got 50 minute walk in and what you

11
00:00:36,570 --> 00:00:41,489
give you something like background on

12
00:00:38,760 --> 00:00:44,090
how PDFs are structured how we process

13
00:00:41,489 --> 00:00:47,700
them into only PDF chairs and then go to

14
00:00:44,090 --> 00:00:50,640
some of ya the hex we do to get images

15
00:00:47,700 --> 00:00:53,850
and fonts working and then face the

16
00:00:50,640 --> 00:00:55,530
thing or showed problems we face in some

17
00:00:53,850 --> 00:00:59,340
steps we want to do in the future and

18
00:00:55,530 --> 00:01:02,430
then to do a small demo at the end so

19
00:00:59,340 --> 00:01:03,899
what does PDF is all about well it's

20
00:01:02,430 --> 00:01:07,790
nothing else than just building an

21
00:01:03,899 --> 00:01:11,670
awesome TF fewer in your web browser and

22
00:01:07,790 --> 00:01:13,680
it's just using html5 technologies so

23
00:01:11,670 --> 00:01:17,210
it's really isn't experimenting where

24
00:01:13,680 --> 00:01:20,430
can you push the web platform where

25
00:01:17,210 --> 00:01:22,439
people will say well PDF or a No can you

26
00:01:20,430 --> 00:01:25,380
do this on the web is it fast enough and

27
00:01:22,439 --> 00:01:29,280
this is just project Z well actually we

28
00:01:25,380 --> 00:01:32,009
can we don't use native code if you want

29
00:01:29,280 --> 00:01:34,560
to see how far we come this year is a

30
00:01:32,009 --> 00:01:36,810
keynote presentation export to PDF and

31
00:01:34,560 --> 00:01:38,970
brought to you by PDF chairs so we

32
00:01:36,810 --> 00:01:41,670
already got something working butter sub

33
00:01:38,970 --> 00:01:43,470
stuff to do so one of the reasons

34
00:01:41,670 --> 00:01:45,750
besides being cool and having all

35
00:01:43,470 --> 00:01:48,869
running in your browser is also security

36
00:01:45,750 --> 00:01:51,509
so if you think of it a lot of people

37
00:01:48,869 --> 00:01:53,729
download PDFs nowadays from the internet

38
00:01:51,509 --> 00:01:56,909
and just open them in there and they're

39
00:01:53,729 --> 00:01:59,009
Acrobat Reader so for some flaws you

40
00:01:56,909 --> 00:02:01,350
might think you're secure and what you

41
00:01:59,009 --> 00:02:04,229
get back from server you can just open

42
00:02:01,350 --> 00:02:07,890
but you never can trust and even SSL can

43
00:02:04,229 --> 00:02:10,110
be attacked as we know now so if you

44
00:02:07,890 --> 00:02:11,760
just run everything in this really small

45
00:02:10,110 --> 00:02:13,220
sandbox in your browser

46
00:02:11,760 --> 00:02:17,060
nothing can attach

47
00:02:13,220 --> 00:02:22,130
or attack you Oh SST so there was this

48
00:02:17,060 --> 00:02:26,690
article on heist news and also and I got

49
00:02:22,130 --> 00:02:29,030
this just before so this is a chart how

50
00:02:26,690 --> 00:02:32,840
windows get affected which are the main

51
00:02:29,030 --> 00:02:36,380
programs as you see most a 32% get em

52
00:02:32,840 --> 00:02:39,020
attacked by Crowe Acrobat Reader so if

53
00:02:36,380 --> 00:02:41,060
they got a not up-to-date version or

54
00:02:39,020 --> 00:02:44,390
whatever so see this is really something

55
00:02:41,060 --> 00:02:45,290
important and by using just web

56
00:02:44,390 --> 00:02:48,740
technologies

57
00:02:45,290 --> 00:02:52,970
you just have JavaScript and nothing can

58
00:02:48,740 --> 00:02:58,220
explore ok so now let's go a little bit

59
00:02:52,970 --> 00:03:00,709
more in default um so how is PDF

60
00:02:58,220 --> 00:03:03,230
structured to give you a background to

61
00:03:00,709 --> 00:03:05,840
see later on how we process it well at

62
00:03:03,230 --> 00:03:08,120
bottom and at the top we got a header

63
00:03:05,840 --> 00:03:12,350
which is most still interest to version

64
00:03:08,120 --> 00:03:14,720
of PDF there multiple versions and then

65
00:03:12,350 --> 00:03:17,060
the biggest chunk is the body the body

66
00:03:14,720 --> 00:03:20,800
is something like a sequence of objects

67
00:03:17,060 --> 00:03:23,959
an object in PDF semantic could be

68
00:03:20,800 --> 00:03:27,380
anything like it can contains fonts that

69
00:03:23,959 --> 00:03:29,540
are embedded in PDF ok contain drawing

70
00:03:27,380 --> 00:03:32,269
commands like draw a line here and then

71
00:03:29,540 --> 00:03:35,360
rectangle there or add some text to this

72
00:03:32,269 --> 00:03:37,730
in that position image data words

73
00:03:35,360 --> 00:03:42,340
bookmarks form feels any kind of

74
00:03:37,730 --> 00:03:44,930
information more a button we get em

75
00:03:42,340 --> 00:03:47,209
something like a mapping between objects

76
00:03:44,930 --> 00:03:49,130
IDs and by its offset as you see we got

77
00:03:47,209 --> 00:03:51,350
something to do because some font

78
00:03:49,130 --> 00:03:56,660
encoding is not working right now VHS

79
00:03:51,350 --> 00:04:01,130
and so this allows you to say ok I want

80
00:03:56,660 --> 00:04:02,720
you have object number 12 and it and if

81
00:04:01,130 --> 00:04:05,060
you don't have this reference you would

82
00:04:02,720 --> 00:04:06,590
have to go through the entire PDF stream

83
00:04:05,060 --> 00:04:08,600
and figure out where up check number 12

84
00:04:06,590 --> 00:04:11,030
starts but with this extra reference

85
00:04:08,600 --> 00:04:14,269
table you can say okay object number 12

86
00:04:11,030 --> 00:04:16,820
starts offset 200 so I just got to seek

87
00:04:14,269 --> 00:04:18,919
unto a 200 and read from there as you

88
00:04:16,820 --> 00:04:20,989
know how long an object is really can

89
00:04:18,919 --> 00:04:24,979
just make sure you just only this one

90
00:04:20,989 --> 00:04:26,360
object and one you got a trailer which

91
00:04:24,979 --> 00:04:29,449
contain the word object

92
00:04:26,360 --> 00:04:32,180
ie which is the derivative checked holes

93
00:04:29,449 --> 00:04:33,830
and all the pages such that you know

94
00:04:32,180 --> 00:04:35,990
okay I go to this object and this object

95
00:04:33,830 --> 00:04:37,849
shows all the idea is to connect objects

96
00:04:35,990 --> 00:04:40,370
they got to read if I want to go to page

97
00:04:37,849 --> 00:04:42,919
five or something and the cool thing

98
00:04:40,370 --> 00:04:46,759
about the structures you can create PDFs

99
00:04:42,919 --> 00:04:49,819
in one fly because all the the chunk

100
00:04:46,759 --> 00:04:52,219
tables a setter is at the end and you

101
00:04:49,819 --> 00:04:54,560
can jump around in PDF document so if

102
00:04:52,219 --> 00:04:58,219
you just got an object ID just can go to

103
00:04:54,560 --> 00:05:02,629
any offset and read from there so now

104
00:04:58,219 --> 00:05:05,180
see how this works in PDF chairs so at

105
00:05:02,629 --> 00:05:07,400
first point and you make an exchange or

106
00:05:05,180 --> 00:05:11,389
two requests to get some data is a

107
00:05:07,400 --> 00:05:13,430
charger compared to xhrs something the

108
00:05:11,389 --> 00:05:15,469
same but you can say I want you have

109
00:05:13,430 --> 00:05:18,710
typed array back so what you get back is

110
00:05:15,469 --> 00:05:21,020
richest a big chunk or wide array that

111
00:05:18,710 --> 00:05:23,870
you can process over and we put a three

112
00:05:21,020 --> 00:05:26,840
month that all streams and coding and

113
00:05:23,870 --> 00:05:29,150
stuff is all headed in JavaScript then

114
00:05:26,840 --> 00:05:32,240
we create a new PDF document around a

115
00:05:29,150 --> 00:05:34,190
stream and we read X reference table

116
00:05:32,240 --> 00:05:36,710
such that we know where each object is

117
00:05:34,190 --> 00:05:39,889
referent M is pointed in the data stream

118
00:05:36,710 --> 00:05:42,469
and read the root object and then we say

119
00:05:39,889 --> 00:05:44,810
well we want to have page n okay we'll

120
00:05:42,469 --> 00:05:47,000
get patron they will say well we will

121
00:05:44,810 --> 00:05:48,830
just stay out rendering and we pass in

122
00:05:47,000 --> 00:05:51,440
graphics object and the graphics object

123
00:05:48,830 --> 00:05:53,000
is what later on knows how to deal with

124
00:05:51,440 --> 00:05:56,509
the painting chrome ads that we sent to

125
00:05:53,000 --> 00:06:00,349
it internally just call start rendering

126
00:05:56,509 --> 00:06:02,270
and you read and convert all the PDF

127
00:06:00,349 --> 00:06:05,900
commands that are in there we see the

128
00:06:02,270 --> 00:06:07,789
later in trade and I are for and that's

129
00:06:05,900 --> 00:06:12,050
done in the partial over what we call

130
00:06:07,789 --> 00:06:14,060
partial evaluator and we make sure that

131
00:06:12,050 --> 00:06:16,909
all the required objects like phones and

132
00:06:14,060 --> 00:06:18,770
images are loaded because if you try to

133
00:06:16,909 --> 00:06:20,659
set a font on the canvas and you try to

134
00:06:18,770 --> 00:06:23,120
treat render it before it's not loaded

135
00:06:20,659 --> 00:06:25,969
you just get nothing so you don't want

136
00:06:23,120 --> 00:06:28,039
you have that and then once we are

137
00:06:25,969 --> 00:06:31,039
insured and we have all completely are

138
00:06:28,039 --> 00:06:33,469
we say okay correctly execute our IR and

139
00:06:31,039 --> 00:06:35,020
you get something painted and generally

140
00:06:33,469 --> 00:06:39,009
we have canvas beckoned

141
00:06:35,020 --> 00:06:42,039
so that's confirmed by canvas crafts

142
00:06:39,009 --> 00:06:44,830
so let's go even a bit more even if we

143
00:06:42,039 --> 00:06:48,430
say for example okay PDF document we

144
00:06:44,830 --> 00:06:50,889
want to have get page and let's say okay

145
00:06:48,430 --> 00:06:52,809
and it should have integer so let's say

146
00:06:50,889 --> 00:06:54,909
we want to have the first page it says

147
00:06:52,809 --> 00:06:57,520
okay you got to go to object number

148
00:06:54,909 --> 00:07:00,610
three so this is what object number

149
00:06:57,520 --> 00:07:02,199
three look like actually it's real I

150
00:07:00,610 --> 00:07:04,930
kiss if you open your PDF document

151
00:07:02,199 --> 00:07:07,899
sometimes it's compressed so you don't

152
00:07:04,930 --> 00:07:10,389
see the content in this readable format

153
00:07:07,899 --> 00:07:10,899
but basically it's reaches the set of

154
00:07:10,389 --> 00:07:14,559
commands

155
00:07:10,899 --> 00:07:16,449
so you see object number three its type

156
00:07:14,559 --> 00:07:18,069
of page we know how big it is

157
00:07:16,449 --> 00:07:20,949
we know where the resources are that

158
00:07:18,069 --> 00:07:23,110
object number four we know depend and we

159
00:07:20,949 --> 00:07:24,999
know the confidence object on five so we

160
00:07:23,110 --> 00:07:28,059
want to process object number four and

161
00:07:24,999 --> 00:07:30,729
object number five when we want to

162
00:07:28,059 --> 00:07:34,270
render so this is now what object number

163
00:07:30,729 --> 00:07:37,330
five will apply we know okay so here we

164
00:07:34,270 --> 00:07:40,270
know it's length eight and it's a stream

165
00:07:37,330 --> 00:07:42,459
and as a side stream might be encoded

166
00:07:40,270 --> 00:07:44,319
and just in this case it's plain text

167
00:07:42,459 --> 00:07:46,539
little bit more easier and you already

168
00:07:44,319 --> 00:07:50,800
see there are some kinds of commands

169
00:07:46,539 --> 00:07:54,180
like yeah begin text move somewhere show

170
00:07:50,800 --> 00:07:59,979
some text and we go see us later

171
00:07:54,180 --> 00:08:01,899
okay now int only as I said we fetch

172
00:07:59,979 --> 00:08:05,559
already your resources and now we got

173
00:08:01,899 --> 00:08:08,110
this thing right we and together with

174
00:08:05,559 --> 00:08:10,749
our extra friends catalog which is this

175
00:08:08,110 --> 00:08:13,180
root object thing and resource that we

176
00:08:10,749 --> 00:08:16,569
load we bring it to the partial

177
00:08:13,180 --> 00:08:18,759
evaluator which creates Ohio art form

178
00:08:16,569 --> 00:08:23,620
this is what the current I all looks

179
00:08:18,759 --> 00:08:28,959
like so you see em most of the commands

180
00:08:23,620 --> 00:08:30,610
just get expanded and um PDF puts the

181
00:08:28,959 --> 00:08:32,740
name of the commands at the back and we

182
00:08:30,610 --> 00:08:36,310
have them in front and just the

183
00:08:32,740 --> 00:08:37,779
parameters just become all as from are

184
00:08:36,310 --> 00:08:39,459
you missed any put your function calls

185
00:08:37,779 --> 00:08:42,310
or you also sort of do some

186
00:08:39,459 --> 00:08:44,589
transformations for example this one

187
00:08:42,310 --> 00:08:48,130
here on left hand side and PDF means

188
00:08:44,589 --> 00:08:50,230
okay set the current font to font zero

189
00:08:48,130 --> 00:08:52,020
which is a reference to resources and

190
00:08:50,230 --> 00:08:57,330
use em

191
00:08:52,020 --> 00:09:01,140
number 12 internally we mark-1 zero

192
00:08:57,330 --> 00:09:03,630
which is fun zero in our object space we

193
00:09:01,140 --> 00:09:06,600
load it and once it's loaded we resolve

194
00:09:03,630 --> 00:09:08,820
promise and the dependency we add to tie

195
00:09:06,600 --> 00:09:11,730
our make sure we don't come across this

196
00:09:08,820 --> 00:09:14,970
point until the font is resolved so what

197
00:09:11,730 --> 00:09:17,340
happens we say okay execute IR we go

198
00:09:14,970 --> 00:09:19,020
through all the commands and we say ok

199
00:09:17,340 --> 00:09:20,970
there's the dependency we check if the

200
00:09:19,020 --> 00:09:23,130
dependence is satisfied which isn't

201
00:09:20,970 --> 00:09:25,710
satisfied yet we stall the execution

202
00:09:23,130 --> 00:09:28,490
wait until it's satisfied and continue

203
00:09:25,710 --> 00:09:31,890
the execution again by doing this we can

204
00:09:28,490 --> 00:09:33,810
later on split up processing of the PDF

205
00:09:31,890 --> 00:09:35,640
because you can think okay I got font

206
00:09:33,810 --> 00:09:38,280
that's required I gather image that's

207
00:09:35,640 --> 00:09:40,830
required so I can send object for an

208
00:09:38,280 --> 00:09:42,780
image to web broker which one does that

209
00:09:40,830 --> 00:09:45,030
thing in front you not a web worker and

210
00:09:42,780 --> 00:09:46,880
once everything is there so today I can

211
00:09:45,030 --> 00:09:52,980
continue execution it's going to happen

212
00:09:46,880 --> 00:09:54,870
and this ir form is then passed to

213
00:09:52,980 --> 00:09:58,920
canvas graphics which change the actual

214
00:09:54,870 --> 00:10:01,650
writing okay so this was more or less

215
00:09:58,920 --> 00:10:05,250
the technical stuff was that too hard or

216
00:10:01,650 --> 00:10:12,060
the questions raising internal

217
00:10:05,250 --> 00:10:14,430
representation so if you just the

218
00:10:12,060 --> 00:10:17,190
problem is in this form if you just take

219
00:10:14,430 --> 00:10:20,430
this you got em still reference to

220
00:10:17,190 --> 00:10:24,210
objects they're ideas that the ir don't

221
00:10:20,430 --> 00:10:26,670
have dependencies on am streams or

222
00:10:24,210 --> 00:10:28,950
things anymore such that if you move

223
00:10:26,670 --> 00:10:30,960
some chunk of data to worker and it

224
00:10:28,950 --> 00:10:34,220
sends something back that's an ir form

225
00:10:30,960 --> 00:10:36,960
you don't have to get access to data in

226
00:10:34,220 --> 00:10:39,200
so that's why make transformation also

227
00:10:36,960 --> 00:10:42,570
to add in the defensive stuff and

228
00:10:39,200 --> 00:10:45,360
there's um the PDF document can also

229
00:10:42,570 --> 00:10:47,220
have something like nested PDF documents

230
00:10:45,360 --> 00:10:49,350
where it says okay this is a year is a

231
00:10:47,220 --> 00:10:51,390
formula again and you get to go to

232
00:10:49,350 --> 00:10:54,390
another trick interesting processing as

233
00:10:51,390 --> 00:10:58,340
well and we've them flat there so then

234
00:10:54,390 --> 00:11:01,850
which is animal for my own extreme

235
00:10:58,340 --> 00:11:01,850
other questions

236
00:11:02,640 --> 00:11:09,880
okay so now two and technial things I

237
00:11:08,560 --> 00:11:14,020
want to have a little bit more details

238
00:11:09,880 --> 00:11:17,290
so how do you load images and to render

239
00:11:14,020 --> 00:11:19,660
them in Gaza well so in PDF documents

240
00:11:17,290 --> 00:11:20,410
the two different kinds you can shape

241
00:11:19,660 --> 00:11:23,530
extreme

242
00:11:20,410 --> 00:11:26,410
well that's question well you just read

243
00:11:23,530 --> 00:11:28,390
some bytes you convert in and then you

244
00:11:26,410 --> 00:11:31,000
create a Dom object and you set a source

245
00:11:28,390 --> 00:11:34,720
to data you are and once it's loaded you

246
00:11:31,000 --> 00:11:39,040
say okay I can use it well if it's not

247
00:11:34,720 --> 00:11:41,020
JPEG stream and there can be a different

248
00:11:39,040 --> 00:11:43,540
color spaces in PDF or sever and

249
00:11:41,020 --> 00:11:45,700
sometimes it's just like you've got some

250
00:11:43,540 --> 00:11:48,280
bite and then you got okay it is this

251
00:11:45,700 --> 00:11:54,370
grayscale but I got to have four colors

252
00:11:48,280 --> 00:11:56,440
all four red blue green m3 okay okay so

253
00:11:54,370 --> 00:11:59,290
we got to make this conversion ourself

254
00:11:56,440 --> 00:12:02,770
so what we do we read the bytes we

255
00:11:59,290 --> 00:12:04,480
convert into color space we take some

256
00:12:02,770 --> 00:12:07,480
image shade off the right size from the

257
00:12:04,480 --> 00:12:10,540
scratch canvas we fill the pixel data on

258
00:12:07,480 --> 00:12:12,550
the canvas then we put it in which data

259
00:12:10,540 --> 00:12:16,330
on the canvas again and we draw an

260
00:12:12,550 --> 00:12:18,220
entire canvas on our PDF cannons so you

261
00:12:16,330 --> 00:12:23,200
see this is really a lot of work but

262
00:12:18,220 --> 00:12:27,640
it's still performs quite well so next

263
00:12:23,200 --> 00:12:29,620
things are fonts there are two ways you

264
00:12:27,640 --> 00:12:32,500
could Halla phones one is rendering each

265
00:12:29,620 --> 00:12:34,330
character with drawing commands so if

266
00:12:32,500 --> 00:12:36,250
you got an A and you have something like

267
00:12:34,330 --> 00:12:38,470
this you've draw one line you more line

268
00:12:36,250 --> 00:12:41,830
here or the other option is transforming

269
00:12:38,470 --> 00:12:44,920
fonts and a lot of different ones and

270
00:12:41,830 --> 00:12:47,170
SSA ones are still not really supported

271
00:12:44,920 --> 00:12:49,840
at all edges and there's some formats

272
00:12:47,170 --> 00:12:52,090
that we don't support all the way we do

273
00:12:49,840 --> 00:12:54,640
it is we take the PDF fonts that are

274
00:12:52,090 --> 00:12:58,480
embedded and convert into OpenType fonts

275
00:12:54,640 --> 00:13:01,900
then again we use CSS to attach them to

276
00:12:58,480 --> 00:13:04,600
the dom and once it's loaded we start

277
00:13:01,900 --> 00:13:06,700
rendering because if you say I want to

278
00:13:04,600 --> 00:13:10,960
use the font and it's not loaded yet you

279
00:13:06,700 --> 00:13:12,430
might end up with whitespace there's

280
00:13:10,960 --> 00:13:14,740
problem that sample

281
00:13:12,430 --> 00:13:17,200
Scannell converted to open types or at

282
00:13:14,740 --> 00:13:20,500
least not that simple and we don't know

283
00:13:17,200 --> 00:13:25,290
yet what we one do there so maybe these

284
00:13:20,500 --> 00:13:28,450
ones got to be drawn read one by drop

285
00:13:25,290 --> 00:13:30,670
okay so now let's face some problems

286
00:13:28,450 --> 00:13:32,920
that we have and in fallen I'm going to

287
00:13:30,670 --> 00:13:37,330
use platform for browser bustle it's

288
00:13:32,920 --> 00:13:39,220
combination so there's actually no real

289
00:13:37,330 --> 00:13:41,680
way to detect people fund is loaded

290
00:13:39,220 --> 00:13:43,690
there are things like okay we can see if

291
00:13:41,680 --> 00:13:45,730
the whiff of something changes or if

292
00:13:43,690 --> 00:13:48,339
there's some output but there are really

293
00:13:45,730 --> 00:13:51,310
edge cases where you just have white em

294
00:13:48,339 --> 00:13:52,959
just in space so if you want to say well

295
00:13:51,310 --> 00:13:54,610
if just something drawn then you

296
00:13:52,959 --> 00:13:57,130
unloaded but if you have a white space

297
00:13:54,610 --> 00:14:00,220
you don't see anything drawn and also

298
00:13:57,130 --> 00:14:02,529
there are some edge case with with so we

299
00:14:00,220 --> 00:14:04,540
got something act like we load curl the

300
00:14:02,529 --> 00:14:06,459
font in iframe and if the iframe says

301
00:14:04,540 --> 00:14:08,860
I'm loaded we hope that an airframe has

302
00:14:06,459 --> 00:14:11,950
fun loaded as well and say it's loaded

303
00:14:08,860 --> 00:14:17,140
but that's not working on WebKit in some

304
00:14:11,950 --> 00:14:19,750
situations and font with so um some

305
00:14:17,140 --> 00:14:22,029
fonts may pour different size then it

306
00:14:19,750 --> 00:14:24,880
actually should be so if you render it

307
00:14:22,029 --> 00:14:27,150
in Firefox on some platforms it ends up

308
00:14:24,880 --> 00:14:29,950
positioning them at the wrong place so

309
00:14:27,150 --> 00:14:32,350
currently we got to paint every check

310
00:14:29,950 --> 00:14:34,920
turn on its and on the calculate

311
00:14:32,350 --> 00:14:39,130
position to make sure it get right and

312
00:14:34,920 --> 00:14:40,720
sub fun them our sub pixel font size is

313
00:14:39,130 --> 00:14:43,589
not working on some platforms that's

314
00:14:40,720 --> 00:14:46,270
also why we draw each character like all

315
00:14:43,589 --> 00:14:49,200
text selection is not working because we

316
00:14:46,270 --> 00:14:52,660
just use canvas so we got some text but

317
00:14:49,200 --> 00:14:55,060
yeah you can tree select it printing is

318
00:14:52,660 --> 00:14:58,329
also problem because can we just draw a

319
00:14:55,060 --> 00:15:00,430
canvas and if you say okay just have

320
00:14:58,329 --> 00:15:03,040
print and you remove some of the UI of

321
00:15:00,430 --> 00:15:05,620
your PF you end up with this low res

322
00:15:03,040 --> 00:15:08,410
that canvas and think that is sent to

323
00:15:05,620 --> 00:15:09,760
your printer which is if you expect at

324
00:15:08,410 --> 00:15:13,060
least one DP you way to you

325
00:15:09,760 --> 00:15:16,240
hello so there are two ways either we

326
00:15:13,060 --> 00:15:21,370
create a realign canvas or we might want

327
00:15:16,240 --> 00:15:24,700
to use SVG and sure speed got to be

328
00:15:21,370 --> 00:15:26,260
better and we want to achieve this by

329
00:15:24,700 --> 00:15:28,120
using workers

330
00:15:26,260 --> 00:15:31,360
did some work on this direction but it's

331
00:15:28,120 --> 00:15:32,980
not landed yet and also we could maybe

332
00:15:31,360 --> 00:15:35,140
do something like partial rendering

333
00:15:32,980 --> 00:15:36,670
where's okay I got this part of document

334
00:15:35,140 --> 00:15:39,520
ready I'll just start rendering and

335
00:15:36,670 --> 00:15:42,850
there's maybe sub formula that isn't

336
00:15:39,520 --> 00:15:44,890
already and or nothing

337
00:15:42,850 --> 00:15:47,290
not everything to render stare at this

338
00:15:44,890 --> 00:15:49,030
point but maybe if most of the text is

339
00:15:47,290 --> 00:15:50,590
there and just a slogan is missing it's

340
00:15:49,030 --> 00:15:55,120
better than just holding on to

341
00:15:50,590 --> 00:15:57,790
everything is there so here's a list of

342
00:15:55,120 --> 00:15:59,590
traduz that came up so let's say there's

343
00:15:57,790 --> 00:16:03,790
more fun work we got to figure out

344
00:15:59,590 --> 00:16:05,740
sprinting speed and we got to support

345
00:16:03,790 --> 00:16:08,080
more of the rendering spec so what we

346
00:16:05,740 --> 00:16:10,630
have actually allows us to cover a lot

347
00:16:08,080 --> 00:16:12,880
of PDF documents but there're a lot of

348
00:16:10,630 --> 00:16:15,340
edge cases like you can have PostScript

349
00:16:12,880 --> 00:16:18,490
embedded as some functions in PDF and

350
00:16:15,340 --> 00:16:21,520
some weird shading and they'll get to

351
00:16:18,490 --> 00:16:24,640
get implement and also we might want to

352
00:16:21,520 --> 00:16:27,220
explore Azra tree and how slow is it how

353
00:16:24,640 --> 00:16:29,590
fast is it if we get SOG working we get

354
00:16:27,220 --> 00:16:31,660
around text selection because we have

355
00:16:29,590 --> 00:16:33,760
text there then we can select in also

356
00:16:31,660 --> 00:16:36,220
printing there's the point and there's a

357
00:16:33,760 --> 00:16:38,020
back on micellar that you can select a

358
00:16:36,220 --> 00:16:41,800
switch a right now but people working

359
00:16:38,020 --> 00:16:44,620
with this ed and then there are more

360
00:16:41,800 --> 00:16:47,410
advanced features than just rendering so

361
00:16:44,620 --> 00:16:51,550
you can have PDF formulas or three in

362
00:16:47,410 --> 00:16:53,110
each graphic and crazy stuff and PDF

363
00:16:51,550 --> 00:16:55,780
forms or something might look in the

364
00:16:53,110 --> 00:16:58,840
future and the more at one stuff got to

365
00:16:55,780 --> 00:17:01,540
see outfits and also from an

366
00:16:58,840 --> 00:17:03,160
infrastructure point and someone that's

367
00:17:01,540 --> 00:17:05,080
got hired from the sellers working on

368
00:17:03,160 --> 00:17:07,870
automated testing environment such that

369
00:17:05,080 --> 00:17:11,290
you can say PDF chairs but please start

370
00:17:07,870 --> 00:17:13,480
testing it makes a poor form from pull

371
00:17:11,290 --> 00:17:16,360
requests and checks all PDFs that we've

372
00:17:13,480 --> 00:17:19,150
got and make reference tests and see if

373
00:17:16,360 --> 00:17:20,710
something changed a lot and also true

374
00:17:19,150 --> 00:17:22,960
only the entire code base is more or

375
00:17:20,710 --> 00:17:25,300
less and all transcripts start so

376
00:17:22,960 --> 00:17:27,340
everything just goes to global space so

377
00:17:25,300 --> 00:17:30,850
we want might want to have something

378
00:17:27,340 --> 00:17:33,070
like a why I just cleaned it up and also

379
00:17:30,850 --> 00:17:34,900
we want to test more PDF documents

380
00:17:33,070 --> 00:17:37,090
because it's hard to implement specs if

381
00:17:34,900 --> 00:17:39,280
you don't have test object so if you

382
00:17:37,090 --> 00:17:42,370
want to help in a very simple way

383
00:17:39,280 --> 00:17:44,380
computing code please open one or two

384
00:17:42,370 --> 00:17:46,720
PDF documents that I come across of even

385
00:17:44,380 --> 00:17:51,340
more and if something play playfully get

386
00:17:46,720 --> 00:18:05,200
help in shape okay so any more time

387
00:17:51,340 --> 00:18:09,040
any questions so far yeah yes yes so

388
00:18:05,200 --> 00:18:11,280
what we do currently we got some URLs or

389
00:18:09,040 --> 00:18:13,780
PDFs on the web we just pull in and

390
00:18:11,280 --> 00:18:16,750
basically each time someone comes up

391
00:18:13,780 --> 00:18:18,480
with problem we ask him politely can put

392
00:18:16,750 --> 00:18:20,830
it somewhere that we can pull in or

393
00:18:18,480 --> 00:18:38,500
copyright is okay when you just move it

394
00:18:20,830 --> 00:18:41,380
in repo yes so it's all a little yes

395
00:18:38,500 --> 00:18:43,240
there was also the idea and the most of

396
00:18:41,380 --> 00:18:45,720
all hands in meeting that we could use

397
00:18:43,240 --> 00:18:49,240
being search and say well give us the

398
00:18:45,720 --> 00:18:52,420
100 or 1000 most probably a few PDF

399
00:18:49,240 --> 00:18:54,250
pages and hope that copywriters are okay

400
00:18:52,420 --> 00:18:54,790
with that pull it in the repo and see if

401
00:18:54,250 --> 00:19:13,870
that works

402
00:18:54,790 --> 00:19:16,990
so some kind of that yes so search isn't

403
00:19:13,870 --> 00:19:19,000
working right now and well I mean we

404
00:19:16,990 --> 00:19:20,980
know where we rendered the photo where

405
00:19:19,000 --> 00:19:23,920
we ended text so we could keep that in

406
00:19:20,980 --> 00:19:24,520
mind something and it's not working

407
00:19:23,920 --> 00:19:26,620
right now

408
00:19:24,520 --> 00:19:30,610
so definitely feature to implement but

409
00:19:26,620 --> 00:19:32,740
what we have is links and such that if

410
00:19:30,610 --> 00:19:34,420
you go over some text in a click on it

411
00:19:32,740 --> 00:19:36,810
goes to not page that's what you know

412
00:19:34,420 --> 00:19:36,810
okay

413
00:19:37,570 --> 00:19:40,650
Oh where's I go to themes

414
00:19:41,340 --> 00:19:50,919
so this one here is what I'll start with

415
00:19:45,460 --> 00:19:55,140
so some reason it doesn't thing up to it

416
00:19:50,919 --> 00:19:55,140
sighs sorry

417
00:19:55,620 --> 00:20:03,909
so this is the first first and document

418
00:20:01,240 --> 00:20:05,620
we had so trace marker paper and enter s

419
00:20:03,909 --> 00:20:08,380
call start this project and the

420
00:20:05,620 --> 00:20:11,679
implement trace monkey form and the

421
00:20:08,380 --> 00:20:14,380
seller and for Firefox so that's why

422
00:20:11,679 --> 00:20:19,390
choose this block document and there are

423
00:20:14,380 --> 00:20:21,279
some graphics in there you see there's

424
00:20:19,390 --> 00:20:23,409
quite some stuff already working when

425
00:20:21,279 --> 00:20:25,659
you see it's kind of lagging whenever

426
00:20:23,409 --> 00:20:27,669
it's reaching in your page you hold you

427
00:20:25,659 --> 00:20:32,740
I fridges and stuff that's because

428
00:20:27,669 --> 00:20:38,350
everything single threaded right now so

429
00:20:32,740 --> 00:20:41,260
especially here takes quite some time so

430
00:20:38,350 --> 00:20:45,610
yeah so we hope we get a better with

431
00:20:41,260 --> 00:20:48,230
them he's working also if you got really

432
00:20:45,610 --> 00:20:51,489
trying PDF

433
00:20:48,230 --> 00:20:51,489
[Music]

434
00:20:55,600 --> 00:21:04,809
[Music]

435
00:21:08,060 --> 00:21:15,720
so for example if you take and the PDF

436
00:21:11,910 --> 00:21:19,170
em well let's documentation that's a way

437
00:21:15,720 --> 00:21:23,240
of why Adobe and that's 32 megabyte and

438
00:21:19,170 --> 00:21:25,740
you can extend ya think if you've got to

439
00:21:23,240 --> 00:21:26,690
render all over this it's gonna take

440
00:21:25,740 --> 00:21:34,650
some time

441
00:21:26,690 --> 00:21:41,790
yes what you continue but once it's

442
00:21:34,650 --> 00:21:44,550
there is and the first time the font is

443
00:21:41,790 --> 00:21:46,320
loaded because font loading is really

444
00:21:44,550 --> 00:21:50,130
going over all the bits making sure they

445
00:21:46,320 --> 00:21:53,220
are open type step now you see here you

446
00:21:50,130 --> 00:21:57,000
can jump here and we just jump to the

447
00:21:53,220 --> 00:21:59,850
place allotment and if the page is small

448
00:21:57,000 --> 00:22:03,560
is just text the speed is already quite

449
00:21:59,850 --> 00:22:13,440
useful but yeah they're rendering bugs

450
00:22:03,560 --> 00:22:17,430
so a lot so M as I said the cool thing

451
00:22:13,440 --> 00:22:19,320
is in theory you would just store in the

452
00:22:17,430 --> 00:22:22,190
data and then read some parts of the

453
00:22:19,320 --> 00:22:25,140
object and what you also could do is say

454
00:22:22,190 --> 00:22:27,210
well so maybe you'll be polite in for

455
00:22:25,140 --> 00:22:28,110
just one tap this range of data just

456
00:22:27,210 --> 00:22:30,120
send it to me

457
00:22:28,110 --> 00:22:32,370
so saying is server supports that you

458
00:22:30,120 --> 00:22:35,280
can you can't do right now but there is

459
00:22:32,370 --> 00:22:38,400
an EM draft to make accessor arches say

460
00:22:35,280 --> 00:22:42,180
I want this range of M by I to the M of

461
00:22:38,400 --> 00:22:45,810
fights and that way you can prevent

462
00:22:42,180 --> 00:22:51,320
darling 32 megabytes maybe but that's

463
00:22:45,810 --> 00:22:51,320
not working right now yes

464
00:22:55,609 --> 00:22:58,609
so

465
00:23:03,610 --> 00:23:10,090
so and maybe I repeated questions the

466
00:23:07,930 --> 00:23:13,630
question was if you can use HTML and CSS

467
00:23:10,090 --> 00:23:16,470
just for texturing and stuff and if you

468
00:23:13,630 --> 00:23:19,000
think of it there's something like

469
00:23:16,470 --> 00:23:22,570
sliding a SlideShare

470
00:23:19,000 --> 00:23:24,250
let's go like it in Crocodoc which

471
00:23:22,570 --> 00:23:27,310
allows you uploading more or less new

472
00:23:24,250 --> 00:23:31,840
PDF slides and they can worry to HTML so

473
00:23:27,310 --> 00:23:36,100
it's possible to do that and we got to

474
00:23:31,840 --> 00:23:39,820
explore our classes and there's some so

475
00:23:36,100 --> 00:23:41,890
the problem there is and what can happen

476
00:23:39,820 --> 00:23:43,690
in PDF is you got some text and you got

477
00:23:41,890 --> 00:23:45,910
some graphics above and then some text

478
00:23:43,690 --> 00:23:47,980
again but I don't know how big this

479
00:23:45,910 --> 00:23:49,900
graph is going to be so you would need

480
00:23:47,980 --> 00:23:51,970
to spin a canvas for the entire document

481
00:23:49,900 --> 00:23:54,040
again what can happen if there's a

482
00:23:51,970 --> 00:23:55,780
little bit of text and try and carrying

483
00:23:54,040 --> 00:23:57,070
a little bit of text right cameras so

484
00:23:55,780 --> 00:24:00,370
would you use a lot of memory it's

485
00:23:57,070 --> 00:24:02,890
technologies cameras above and I think

486
00:24:00,370 --> 00:24:06,010
the PDF renderer on the web that

487
00:24:02,890 --> 00:24:08,260
converts to text and CSS that just say

488
00:24:06,010 --> 00:24:10,540
all Kravis go to the background I will

489
00:24:08,260 --> 00:24:12,910
put text on top so if you have some

490
00:24:10,540 --> 00:24:15,250
graphics that cover the text it won't

491
00:24:12,910 --> 00:24:18,610
work because it just puts it down that

492
00:24:15,250 --> 00:24:25,830
we want to have for doing working so get

493
00:24:18,610 --> 00:24:25,830
to see yes

494
00:24:27,380 --> 00:24:35,070
so I think the main PFR and PHS files

495
00:24:31,290 --> 00:24:39,330
around 300k and our stuff without

496
00:24:35,070 --> 00:24:41,310
compression so it's quite huge if you

497
00:24:39,330 --> 00:24:44,070
got to implement all this and different

498
00:24:41,310 --> 00:24:53,490
streams and yeah it's a little bit of

499
00:24:44,070 --> 00:24:59,600
code okay yeah but we haven't yeah we

500
00:24:53,490 --> 00:24:59,600
don't get that much working as David oh

501
00:25:03,890 --> 00:25:08,460
yes sir

502
00:25:05,220 --> 00:25:11,910
so um so I'm actually a student at ETH

503
00:25:08,460 --> 00:25:14,670
and studying physics and I was at

504
00:25:11,910 --> 00:25:15,210
Mozilla two weeks ago hacking on PDF

505
00:25:14,670 --> 00:25:17,730
chess

506
00:25:15,210 --> 00:25:20,370
so we're read and mad andreas on the

507
00:25:17,730 --> 00:25:23,250
racks of team and currently things are

508
00:25:20,370 --> 00:25:25,080
like a mentor as is making some code

509
00:25:23,250 --> 00:25:26,900
reviews and get some good input but he's

510
00:25:25,080 --> 00:25:30,150
working on boot to gecko retina and

511
00:25:26,900 --> 00:25:32,760
Chris Jones who was at first time with

512
00:25:30,150 --> 00:25:35,670
Chris and the country is working on this

513
00:25:32,760 --> 00:25:38,520
is on boot to gecko as well this are now

514
00:25:35,670 --> 00:25:40,350
two full employees working for muscle on

515
00:25:38,520 --> 00:25:43,830
the project one on test infrastructure

516
00:25:40,350 --> 00:25:47,840
when I got implemented the PF renderer

517
00:25:43,830 --> 00:25:52,710
as well and so he hide a competitor and

518
00:25:47,840 --> 00:25:55,650
there's one contractor and a few and

519
00:25:52,710 --> 00:25:59,130
contributors so quite a few

520
00:25:55,650 --> 00:26:02,400
and maybe that's good one so I got two

521
00:25:59,130 --> 00:26:04,530
euro to contact so get up page my Lingus

522
00:26:02,400 --> 00:26:08,910
and IRC if you got any questions if you

523
00:26:04,530 --> 00:26:11,760
have PDF that's not working and I hope

524
00:26:08,910 --> 00:26:13,980
and you get so there's getting started

525
00:26:11,760 --> 00:26:15,960
thing that there's online demo that you

526
00:26:13,980 --> 00:26:18,330
can check out so you just want Tessa

527
00:26:15,960 --> 00:26:20,760
thanks break a lot this is easy square

528
00:26:18,330 --> 00:26:30,110
to go and there's also how you can clone

529
00:26:20,760 --> 00:26:34,050
stuff and make us server running okay so

530
00:26:30,110 --> 00:26:41,900
thanks for listening and have a good one

531
00:26:34,050 --> 00:26:41,900
[Applause]